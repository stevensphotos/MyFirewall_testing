
Protocole de Test â€“ MyFirewall (V0.9)
Objectif
Valider la stabilitÃ©, la sÃ©curitÃ© et lâ€™ergonomie de lâ€™application MyFirewall sur des appareils Android (APIâ€¯24â€¯Ã â€¯35).

1ï¸âƒ£ PrÃ©requis pour le testeur

ğŸ“± Un appareil Android physique (les Ã©mulateurs ne gÃ¨rent pas correctement le VPN et la biomÃ©trie).
ğŸ”‘ AccÃ¨s Root (optionnel, pour tester le filtre Hosts).
ğŸ‘† Empreinte digitale ou code PIN configurÃ© sur lâ€™appareil.
ğŸŒ Connexion Wiâ€‘Fi et donnÃ©es mobiles fonctionnelles.


2ï¸âƒ£ Test du Cycle de Vie et SÃ©curitÃ©
TestAction AttenduT.01 â€“ Premier lancement (Onboarding)Installer et ouvrir lâ€™application pour la premiÃ¨re fois.Lâ€™Ã©cran dâ€™onboarding sâ€™affiche. Le bouton Start demande les permissions nÃ©cessaires. Aucun verrouillage biomÃ©trique nâ€™est demandÃ© Ã  ce stade.T.02 â€“ Verrouillage biomÃ©trique (Appâ€¯Lock)1. Activer Applicationâ€¯Lock dans Settings.  2. Fermer lâ€™application (tuer le processus) et la relancer.Une invite biomÃ©trique systÃ¨me apparaÃ®t immÃ©diatement. Lâ€™interface reste masquÃ©e tant que lâ€™authentification nâ€™est pas rÃ©ussie.Actionâ€¯: Annuler lâ€™authentification.Attenduâ€¯: Lâ€™application se ferme immÃ©diatement (finish()).T.03 â€“ DÃ©lai de verrouillage (Timeout)Authentifier lâ€™accÃ¨s, mettre lâ€™application en arriÃ¨reâ€‘plan >â€¯30â€¯s, puis revenir.Lâ€™application redemande une authentification biomÃ©trique.

3ï¸âƒ£ Test des Moteurs de Filtrage (Mutual Exclusivity)
T.04 â€“ URL Filter (VPN)


Actionâ€¯: Aller Ã  lâ€™Ã©cran Rules, cocher les listes de blocage, vÃ©rifier sur lâ€™Ã©cran Status le tÃ©lÃ©chargement effectif des listes et leur activation.


Attenduâ€¯: Les listes se tÃ©lÃ©chargent sans erreur.


Actionâ€¯: Activer URLâ€¯Filterâ€¯VPN et accepter la demande de connexion VPN dâ€™Android.


Attenduâ€¯: Lâ€™icÃ´ne VPN apparaÃ®t dans la barre de statut, le statut passe Ã  Active.


VÃ©rificationâ€¯: Tenter dâ€™accÃ©der Ã  un domaine bloquÃ© (ex. doubleclick.net).


RÃ©sultatâ€¯: Lâ€™accÃ¨s doit Ãªtre refusÃ©.


T.05 â€“ Application Filter (Routage par App)


Actionâ€¯: Activer Applicationâ€¯Filter.


Attenduâ€¯: Le URLâ€¯Filterâ€¯VPN se dÃ©sactive automatiquement (sâ€™il Ã©tait actif) et le service VPN redÃ©marre proprement.


Actionâ€¯: Dans lâ€™onglet Applications, interdire lâ€™accÃ¨s Wiâ€‘Fi Ã  un navigateur (ex. Chrome).


Attenduâ€¯: Le navigateur ne charge plus de pages en Wiâ€‘Fi mais fonctionne en donnÃ©es mobiles si le toggle correspondant est ON.


T.06 â€“ Transition Root (Hosts)


Actionâ€¯: Activer URLâ€¯Filterâ€¯Root (appareil rootÃ© requis).


Attenduâ€¯: Le service VPN sâ€™arrÃªte immÃ©diatement, une demande SU apparaÃ®t, le toggle Startâ€¯onâ€¯Boot passe Ã  OFF.


VÃ©rificationâ€¯: Ouvrir un terminal/root explorer et vÃ©rifier que /etc/hosts contient les domaines de la base de donnÃ©es.



4ï¸âƒ£ Test de lâ€™Interface Utilisateur (AccessibilitÃ©)
T.07 â€“ Grandes polices (Font scaling)

Actionâ€¯: Dans les paramÃ¨tres Android, rÃ©gler la taille de police Ã  200â€¯%.
Attenduâ€¯:

Dans Settings, les commutateurs restent visibles Ã  droite (pas de dÃ©bordement).
Dans la barre de navigation, les libellÃ©s ne sont pas tronquÃ©sâ€¯; ils utilisent lâ€™ellipse (â€¦) ou restent sur une seule ligne.



T.08 â€“ ThÃ¨mes et couleurs

Actionâ€¯: Basculer entre Light, Dark et System. Activer Pureâ€¯Black.
Attenduâ€¯: Lâ€™UI sâ€™adapte instantanÃ©ment. En mode Pureâ€¯Black, le fond doit Ãªtre #000000 (OLED).


5ï¸âƒ£ Test de Persistance et Maintenance
T.09 â€“ Start on Boot

Actionâ€¯: Activer un filtre VPN, cocher Startâ€¯onâ€¯Boot, puis redÃ©marrer lâ€™appareil.
Attenduâ€¯: AprÃ¨s le dÃ©verrouillage (Directâ€¯Boot), le service VPN se lance automatiquement, sans intervention manuelle.

T.10 â€“ Import / Export de rÃ¨gles

Actionâ€¯: Exporter les rÃ¨gles dans un fichier JSON, supprimer une rÃ¨gle manuellement, puis rÃ©importer le fichier.
Attenduâ€¯: Un Toast confirme lâ€™importation, la base de donnÃ©es Room est mise Ã  jour, les doublons sont gÃ©rÃ©s (remplacement).


6ï¸âƒ£ Rapport dâ€™anomalie (Template)
- **ID** : (ex. BUGâ€‘001)
- **SÃ©vÃ©ritÃ©** : (Bloquant / Majeur / Mineur)
- **Composant** : (VPN / UI / Root / SÃ©curitÃ©)
- **Ã‰tapes de reproduction** :
- **RÃ©sultat observÃ©** :
- **RÃ©sultat attendu** :
- **Logs (Logcat)** : (Optionnel mais recommandÃ© pour les erreurs PermissionMonitor)

Protocole de Test â€“ MyFirewall (V1.0) â€“ Version synthÃ©tique
Objectif
Valider lâ€™intÃ©gritÃ© du filtrage rÃ©seau, la persistance des donnÃ©es Room et lâ€™accessibilitÃ© de lâ€™interface.

1ï¸âƒ£ Tests UI & Navigation
1.1 Navigation & Pager


Actionâ€¯: Swiper entre les onglets Status, Applications, Rules et Settings.


Attenduâ€¯: Transition fluide, le label de lâ€™onglet sÃ©lectionnÃ© dans le NavigationSuiteScaffold est mis en Ã©vidence.


Test accessibilitÃ©â€¯: Augmenter la police systÃ¨me Ã  200â€¯%; les labels de navigation ne doivent pas crÃ©er dâ€™orphelins ni dÃ©border (plafondâ€¯â‰ˆâ€¯1.2Ã—).


1.2 SÃ©lection par longâ€‘click (contextuelle)


Actionâ€¯: Dans Applications, faire un appui long sur une appli.


Attenduâ€¯: Ouverture immÃ©diate des DÃ©tails de lâ€™application dans les paramÃ¨tres Android.


Actionâ€¯: Dans Customâ€¯Rules, faire un appui long sur un domaine.


Attenduâ€¯: Mode sÃ©lection activÃ©, permettant suppression/groupÃ©e ou modification.


Action : Dans Settings rÃ©gler la langue sur FranÃ§ais


Attendu : toute l'interface est en FranÃ§ais. Menus, textes, dialogs, toasts



2ï¸âƒ£ Tests des moteurs de filtrage (VPN â†”â€¯Hosts)
2.1 Filtrage URL via VPN


Actionâ€¯: Activer URLâ€¯Filterâ€¯VPN dans Settings.


Attenduâ€¯: Demande dâ€™autorisation VPN, icÃ´ne VPN apparaÃ®t.


Validationâ€¯: AccÃ©der Ã  un domaine prÃ©sent dans la liste de blocage via un navigateur â†’ requÃªte Ã©choue (NXDOMAIN).


2.2 Filtrage URL via Hosts (Root)


Actionâ€¯: Activer URLâ€¯Filterâ€¯Root.


Attenduâ€¯:

DÃ©sactivation automatique du VPN (exclusivitÃ©).
Demande de permission SuperUser (SU).
Toggle Startâ€¯onâ€¯Boot passe Ã  OFF.



Validationâ€¯: cat /etc/hosts montre les rÃ¨gles injectÃ©es depuis la base Room.


2.3 Transition VPN â†’ Hosts

Actionâ€¯: Passer rapidement de lâ€™un Ã  lâ€™autre.
Attenduâ€¯: Aucun race condition. Le dÃ©lai (delay(400)) permet au system_server de libÃ©rer lâ€™interface tun0 avant que le moteur Hosts ne prenne le relais.


3ï¸âƒ£ Test pareâ€‘feu (blocage par application)
3.1 Blocage de trafic sortant


Actionâ€¯: Activer Applicationâ€¯Filter.


Actionâ€¯: Dans la liste, dÃ©sactiver lâ€™icÃ´ne Wiâ€‘Fi pour une appli (ex. YouTube).


Attenduâ€¯: Lâ€™appli ne charge plus de donnÃ©es en Wiâ€‘Fi.


Actionâ€¯: DÃ©sactiver Ã©galement lâ€™icÃ´ne Mobileâ€¯Data.


Attenduâ€¯: Lâ€™appli est totalement isolÃ©e du rÃ©seau.


VÃ©rification techniqueâ€¯: Les logs montrent que le VpnPacketThread traite les paquets de lâ€™UID concernÃ©.



4ï¸âƒ£ Import / Export de listes
4.1 Exportation

Actionâ€¯: Cliquer sur Export â†’ Applicationâ€¯Rules.
Attenduâ€¯: SÃ©lecteur de fichier SAF sâ€™ouvre, le fichier JSON gÃ©nÃ©rÃ© est valide et contient les colonnes packageName, wifiAllowed, etc.

4.2 Importation & validation JSON


Actionâ€¯: Importer un fichier JSON malformÃ© ou avec un packageName invalide.


Attenduâ€¯: Le filtre Regex rejette lâ€™entrÃ©e, aucun crash.


Actionâ€¯: Importer un fichier valide.


Attenduâ€¯: Transaction Room atomique, un Toast indique le nombre de rÃ¨gles importÃ©es.



5ï¸âƒ£ Gestion des listes Custom (Blacklist / Whitelist)
5.1 Ajout de domaines personnalisÃ©s


Actionâ€¯: Ajouter un domaine manuellement dans Customâ€¯Rules.


Attenduâ€¯: Validation du format (pas de caractÃ¨res spÃ©ciaux interdits).


Actionâ€¯: Cliquer sur Sauvegarder.


Attenduâ€¯: Si le VPN est actif, lâ€™action ACTION_RELOAD_RULES est envoyÃ©e immÃ©diatement pour rafraÃ®chir le cache blockedDomains du service.



6ï¸âƒ£ Tests de sÃ©curitÃ© (biomÃ©trie)
6.1 Verrouillage au dÃ©marrage


Actionâ€¯: Activer Applicationâ€¯Lock, tuer lâ€™app, la relancer.


Attenduâ€¯: BiometricPrompt sâ€™affiche avant tout accÃ¨s UI.


Actionâ€¯: Annuler lâ€™authentification.


Attenduâ€¯: Lâ€™app appelle finish() et se ferme.


6.2 Timeout de session

Actionâ€¯: DÃ©verrouiller lâ€™app, la mettre en arriÃ¨reâ€‘plan >â€¯30â€¯s, puis revenir.
Attenduâ€¯: LifecycleObserver dÃ©tecte le dÃ©passement du lockTimeout et redemande lâ€™empreinte.


ğŸ“‹ Checklist finale â€“ Rapport de stabilitÃ©

Aucun blocage du thread principal (ANR) lors des Ã©critures SharedPreferences.apply().
Le thread VPN consomme <â€¯2â€¯% CPU en veille.
Les icÃ´nes sâ€™affichent correctement en mode Dark et Pureâ€¯Black.
Pas de fuite mÃ©moire lors du changement dâ€™orientation (rememberSaveable).


Vous pouvez copierâ€‘coller ce contenu dans un fichier README.md (ou tout autre fichier .md) et il sera correctement rendu dans nâ€™importe quel visualiseur Markdown.
